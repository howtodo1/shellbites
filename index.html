<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/static/css/css-src_app_globals_css-node_modules_next_font_google_target_css.css?v=1713121059879" data-precedence="next_static/css/css-src_app_globals_css-node_modules_next_font_google_target_css.css"><link rel="preload" as="script" fetchpriority="low" href="/static/chunks/webpack.js?v=1713120669146"><script src="/static/chunks/main-app.js?v=1713120669146" async=""></script><script src="/static/chunks/app-pages-internals.js" async=""></script><script src="/static/chunks/app/page.js" async=""></script><title>Create Next App</title><meta name="description" content="Generated by create next app"><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"><meta name="next-size-adjust"><script src="/static/chunks/polyfills.js" nomodule=""></script><link rel="preload" href="/static/media/c9a5bc6a7c948fb0-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" as="style" href="/static/css/css-src_app_globals_css-node_modules_next_font_google_target_css.css?v=1713121059879"></head><body class="__className_aaf875"><h1 style="font-family: monospace" class="text-center p-12 text-8xl">shell bites</h1><main class="flex min-h-screen flex-row justify-between p-12">
  
  <div class="text-center w-1/8 "><h1 class="text-sm">LEVEL</h1><h6 id="lvl" class="text-8xl">1</h6></div><div class="overflow-auto w-3/4 flex-none">
  <div class="overflow-hidden" id="terminal"></div>
  <script src="https://cheerpxdemos.leaningtech.com/publicdeploy/20240316_136/cx.js"></script>

  <script src="
  https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js
  "></script>
  <link href="
  https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.min.css
  " rel="stylesheet">
  <link rel="stylesheet" href = "style.css">
  <script type="module">
    var solve = false;

    const levels = [["https://github.com/howtodo1/webvm/releases/download/ext2_image/debian_mini_20240415_8683683933.ext2", "FIND A FLAG", "C77Ua11w8v2BoSBDFUk7"], ["hm/debian_mini_20240414_8681239050.ext2", "SIXTY FOUR", "L1SIX6H3B2UHuliiJngt"], ["hm/debian_mini_20240415_8681799090.ext2", "EXTRACT", "2Ox4LxXK2xw33wt3JRJm"]]
  function Utf8ArrayToStr(array) {
    var out, i, len, c;
    var char2, char3;

    out = "";
    len = array.length;
    i = 0;
    while(i < len) {
    c = array[i++];
    switch(c >> 4)
    { 
      case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:
        // 0xxxxxxx
        out += String.fromCharCode(c);
        break;
      case 12: case 13:
        // 110x xxxx   10xx xxxx
        char2 = array[i++];
        out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));
        break;
      case 14:
        // 1110 xxxx  10xx xxxx  10xx xxxx
        char2 = array[i++];
        char3 = array[i++];
        out += String.fromCharCode(((c & 0x0F) << 12) |
                       ((char2 & 0x3F) << 6) |
                       ((char3 & 0x3F) << 0));
        break;
    }
    }

    return out;
}
    console.log("test")
    function up(){
      document.body.style.background = "#07020f";
    }
      async function VM(lnk, code){
        solve = false;
        var term = new Terminal({ convertEol: true });
        term.open(document.getElementById("terminal"));
        if(code == "C77Ua11w8v2BoSBDFUk7"){ term.write(" \n  _ |_   _  | |   |_  o _|_  _   _ \n _> | | (/_ | |   |_) |  |_ (/_ _>\n\n shell bites is a small CTF game that runs entirely on your browser!\n To play, find and open the flag file.\n Once you open the file, the game will automatically progress.\n\n Good luck and happy hacking!\n\n Loading...\n")} else {
          term.write(" \n  _ |_   _  | |   |_  o _|_  _   _ \n _> | | (/_ | |   |_) |  |_ (/_ _>\n\n Loading...\n")}
        

        var cx = await CheerpXApp.create({
        devices: [
          {
            name: "block1",
            type: "block",
            url: lnk,
          },
        ],
        mounts: [
          { type: "ext2", dev: "block1", path: "/" },
          { type: "cheerpOS", dev: "/app", path: "/app" },
          { type: "cheerpOS", dev: "/str", path: "/data" },
          { type: "devs", dev: "", path: "/dev" },
        ],
      });
    var send = cx.setCustomConsole(
      (buf) => {
        term.write(new Uint8Array(buf));
        if (Utf8ArrayToStr(new Uint8Array(buf)).includes(code)){
          solve = true;
          document.getElementById("terminal").innerHTML = "";
        }
        
      },
      term.cols,
      term.rows,
    );
    term.onData((str) => {
      var audio = new Audio('/8-bit-kit-boop_C.wav');
      audio.play();
      //document.body.style.background = "#110615";
      //setTimeout(up, 100);
      for (let i = 0; i < str.length; i++) {
        send?.(str.charCodeAt(i));
      }
    });
    await cx.run("/bin/bash", ["--login"], {
      env: [
        "HOME=/home/user",
        "USER=user",
        "SHELL=/bin/bash",
        "EDITOR=vim",
        "LANG=en_US.UTF-8",
        "LC_ALL=C",
      ],
      cwd: "/home/user",
      uid: 1000,
      gid: 1000,
    });
      }
      VM(levels[0][0], levels[0][2])
      var nm = 0;
      function doStuff() {
        if(solve==false) {//we want it to match
              setTimeout(doStuff, 50);//wait 50 millisecnds then recheck
              return;
          }
          nm++
          document.getElementById("lvl").innerHTML = (nm + 1).toString();
          document.getElementById("txt").innerHTML = levels[nm][1];
          console.log("new");
        var audio = new Audio('/game-start-6104.mp3');
        audio.play();
        //document.body.style.background = "#151019";
        //setTimeout(up, 2000);
        VM(levels[nm][0], levels[nm][2])
        setTimeout(doStuff, 50);
      }
      doStuff();
</script>
  
</div><div class="text-center w-1/8 flex-none"><h1 id="txt" class="text-sm">FIND A FLAG</h1></div></main><div style="position: absolute; top: -50000px; width: 50000px; white-space: pre; font-kerning: none; font-family: courier-new, courier, monospace; font-size: 15px;"><span style="font-weight: normal;">pppppppppppppppppppppppppppppppp</span><span style="font-weight: bold;"></span><span style="font-style: italic; font-weight: normal;"></span><span style="font-weight: bold; font-style: italic;"></span></div></body></html>
